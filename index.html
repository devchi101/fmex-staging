<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fuck My Ex Coin ($FMEX)</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <style>
  .toast {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    background: #222;
    color: #fff;
    padding: 12px 20px;
    border-radius: 6px;
    font-weight: bold;
    opacity: 0;
    transition: opacity 0.5s ease-in-out;
    z-index: 9999;
  }
  .toast.show {
    opacity: 1;
  }
</style>

<div id="toast" class="toast"></div>
<audio id="toast-sound" src="assets/beep1.mp3" preload="auto"></audio>

    <header class="header">
    <div class="logo">üíî</div>
    <div class="header-controls">
      <button id="theme-toggle">üåô</button>
      <button id="wallet-button">Connect Wallet</button>
    </div>
  </header>

  <div class="container">
    <header>
      <h1>Fuck My Ex Token ($FMEX)</h1>
      <p>The only coin born from heartbreak, caffeine, and dangerously poor decisions.</p>
    </header>

    <section class="cards">
      <div class="card">
        <div class="icon">üíî</div>
        <h2>What is $FMEX?</h2>
        <p>$FMEX is your on-chain revenge. It‚Äôs not just a token ‚Äî it‚Äôs therapy on the blockchain.</p>
        <a class="whitepaper-button" href="https://drive.google.com/file/d/1ipVY_3A92YBCZR8kGmAQsWbvo6LHHlCu/view?usp=sharing" target="_blank" onclick="event.stopPropagation();">
    Whitepaper‚Üó 
  </a>
      </div>
      <div class="card">
        <div class="icon">üöÄ</div>
        <h2>Pettynomics‚Ñ¢</h2>
        <p>69% to the community, 15% therapy fund, 10% revenge marketing, 6% burned in ritual fire.</p>
      </div>
      <div class="card">
        <div class="icon">üî•</div>
        <h2>Roadmap</h2>
        <p>Q1: Got dumped. Q2: Launched FMEX. Q3: Emotional rugs. Q4: Moon.</p>
      </div>
    </section>

    <section class="buy-form">
      <h2 class="Join-text"> Join $FMEX Presale Now!!</h2>
      <p>You gave you ex years, give us 1 SOL</p>
      <p>Price: <strong>1 SOL = 800,000 FMEX | Listing Price: $0.0025</strong></p>
      <p id="countdown" style="font-size: 0.7rem;"></p>
      <input type="number" id="solAmount" placeholder="Enter SOL amount (min 1)" min="0.1" step="0.1" />
      <button class="buy-button" id="buyButton">Buy with SOL</button>
      <p id="confirmationMessage" style="margin-top:1rem; color:green;"></p>
      <p class="status" id="status">üí° Connect Phantom wallet to continue.</p>
    </section>

    <div id="phantom-mobile-hint" style="display:none; margin-top:1rem;">
  <p style="font-weight:bold; color:#b00020;">üö® To connect your wallet on mobile, use the Phantom App:</p>
  <a href="https://phantom.app/ul/browse/https://devchi101.github.io/fmex-staging/" target="_blank" style="color:white; font-weight:bold; background:#8e24aa; padding:10px 20px; border-radius:8px; display:inline-block; text-decoration:none;">
    Open in Phantom App
  </a>
</div>

    <div class="progress-wrapper">
  <div class="progress-bar">
    <div class="progress-fill" id="progress-fill"></div>
  </div>
  <p class="progress-stats">Target: $50,000 | Raised: $22,980.01</p>
 </div>

    <footer>
  <p>‚ÄúBecause sometimes the only way to heal‚Ä¶ is to pump so hard your ex hears about it on Crypto Twitter.‚Äù</p>

  <div class="socials">
    <a href="https://t.me/yourchannel" target="_blank" aria-label="Telegram">
      <img src="assets/telegram.svg" alt="Telegram icon" />
    </a>
    <a href="https://x.com/fuckmyexcoin" target="_blank" aria-label="X">
      <img src="assets/x.svg" alt="X icon" />
    </a>
    <a href="https://instagram.com/yourhandle" target="_blank" aria-label="Instagram">
      <img src="assets/instagram.svg" alt="Instagram icon" />
    </a>
  </div>
</footer>


  <script>
    // ‚è≥ Countdown Timer
  window.addEventListener('DOMContentLoaded', () => {
    const countdownEl = document.getElementById('countdown');
    const presaleEnd = new Date();
    presaleEnd.setDate(presaleEnd.getDate() + 6); // 3 days from now
    presaleEnd.setHours(0, 0, 0, 0);

    function updateCountdown() {
      const now = new Date().getTime();
      const distance = presaleEnd - now;

      if (distance < 0) {
        countdownEl.textContent = "üö® Presale ended!";
        return;
      }

      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const mins = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const secs = Math.floor((distance % (1000 * 60)) / 1000);

      countdownEl.textContent = `Presale ends in ${days}d ${hours}h ${mins}m ${secs}s`;
    }

    updateCountdown();
    setInterval(updateCountdown, 1000);
  });
</script>

<script type="module">
  import {
    Connection,
    clusterApiUrl,
    PublicKey,
    Transaction,
    SystemProgram,
  } from "https://esm.sh/@solana/web3.js";

  const buyButton = document.getElementById("buyButton");
  const solInput = document.getElementById("solAmount");
  const confirmMsg = document.getElementById("confirmationMessage");
  const toast = document.getElementById("toast");

  const recipientAddress = "dev67zAteMQYnU5bDAPgtnt2TBf8W82YB768HQ4xtJd";

  function showToast(message, isError = false, playSound = false) {
    toast.textContent = message;
    toast.style.background = isError ? "#b00020" : "#222";
    toast.classList.add("show");

    if (playSound) {
      const sound = document.getElementById("toast-sound");
      if (sound) {
        sound.currentTime = 0;
        sound.play().catch(err => {
          console.warn("Autoplay failed:", err.message);
        });
      }
    }

    setTimeout(() => toast.classList.remove("show"), 7000);
  }

  buyButton.addEventListener("click", async () => {
    if (!window.solana?.isPhantom) {
  window.location.href = "https://phantom.app/ul/browse/" + encodeURIComponent(window.location.href);
  return;
}

    const amount = parseFloat(solInput.value);
    if (isNaN(amount) || amount < 0.1) {
      showToast("Enter at least 0.1 SOL", true);
      return;
    }

    try {
      buyButton.disabled = true;
      buyButton.textContent = "‚è≥ Processing...";
      confirmMsg.textContent = "";

      const provider = window.solana;
      await provider.connect();

      const connection = new Connection(clusterApiUrl("devnet"), "confirmed");
      const fromPubkey = provider.publicKey;
      const toPubkey = new PublicKey(recipientAddress);

      const transaction = new Transaction().add(
        SystemProgram.transfer({
          fromPubkey,
          toPubkey,
          lamports: amount * 1e9,
        })
      );

      const { blockhash } = await connection.getLatestBlockhash();
      transaction.recentBlockhash = blockhash;
      transaction.feePayer = fromPubkey;

      const signed = await provider.signTransaction(transaction);
      const signature = await connection.sendRawTransaction(signed.serialize());
      await connection.confirmTransaction(signature);

      showToast("‚úÖ Transaction successful!! Your $FMEX will be sent in 24 hrs after verification", false, true);
      confirmMsg.textContent = `‚ù§Ô∏è Congrats, ${amount} SOL bought! Your ex still sucks, but now you have $FMEX ‚Äî Txn: ${signature}`;
      confirmMsg.style.color = "green";

    } catch (err) {
      console.error(err);
      showToast("‚ùå " + err.message, true);
      confirmMsg.textContent = `‚ùå Transaction failed: ${err.message}`;
      confirmMsg.style.color = "red";
    } finally {
      buyButton.disabled = false;
      buyButton.textContent = "Buy with SOL";
    }
  });
</script>

<script src="script.js"></script>
  <script>
  const connectBtn = document.getElementById("connect-wallet");
  const walletAddress = document.getElementById("wallet-address");

  async function connectPhantom() {
    if (window.solana && window.solana.isPhantom) {
      try {
        const resp = await window.solana.connect();
        walletAddress.textContent = `Connected: ${resp.publicKey.toString()}`;
      } catch (err) {
        console.error("Connection failed", err);
      }
    } else {
      alert("Phantom Wallet not found. Install it from https://phantom.app");
    }
  }

  connectBtn.addEventListener("click", connectPhantom);
</script>

<script>
  function isMobile() {
    return /Mobi|Android|iPhone/i.test(navigator.userAgent);
  }

  window.addEventListener("DOMContentLoaded", () => {
    const phantomHint = document.getElementById("phantom-mobile-hint");

    if (isMobile() && (!window.solana || !window.solana.isPhantom)) {
      phantomHint.style.display = "block";
    }
  });
</script>

<style>
  #wallet-button {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 0.75rem 1rem;
    background: #411276;
    border: 2px solid #000;
    font-weight: bold;
    color: #ffffff;
    border-radius: 50px;
    cursor: pointer;
    z-index: 1000;
  }
  @media (min-width: 768px) {
    #wallet-button {
      position: static;
      box-shadow: none;
    }
  }
</style>

</body>
</html>
